/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. */package DbModel;import java.sql.Connection;import java.sql.ResultSet;import java.sql.SQLException;import java.sql.Statement;import java.util.ArrayList;/** * * @author Mughees */public class ControllerMenuButtonModel {         MyDbConnection db;     Connection con;     ArrayList<ControllerMenuButton> ac= new ArrayList<ControllerMenuButton>();                    public ControllerMenuButtonModel()     {          db= new MyDbConnection();         con=db.getMyConnection();     }                    public ArrayList<ControllerMenuButton> allButtons() throws SQLException   {                         Statement s=con.createStatement();        ResultSet res = s.executeQuery("SELECT * FROM controller_menu_button");                 while (res.next()) {                          int id=res.getInt("Id");            String name=res.getString("name");           int  userId=res.getInt("main_menu_button_id");                          ControllerMenuButton tmp = new ControllerMenuButton(id,name,userId);        ac.add(tmp);                }                                    return ac;  }     public ArrayList<ControllerMenuButton> findChildren(int id) throws SQLException    {        allButtons();        ArrayList<ControllerMenuButton> children=new ArrayList<ControllerMenuButton>();                for(ControllerMenuButton c :  ac)        {                                  if(c.mainMenuId==id)           {               children.add(c);                          }        }        return children;    }          public ControllerMenuButton findControllerMenuButton(int id) throws SQLException    {        allButtons();        for(ControllerMenuButton c :  ac)        {                                   if(c.id==id)           {               return c;           }        }        return null;    }                      public String insertControllerMenuButton( String name, int mainId) throws SQLException    {                 Statement s=con.createStatement();               s.execute("insert into controller_menu_button values( 0,'"+name+"',"+mainId+")");                 ResultSet res = s.executeQuery("SELECT max(Id) FROM controller_menu_button");         int id=0;        while (res.next()) {                        id=res.getInt("max(Id)");                   }                                                      return String.valueOf(id);              }       public void deleteControllerMenuButton( int Id) throws SQLException     {                 Statement s=con.createStatement();                s.execute("delete from controller_menu_button where Id="+Id);                  SubMenuModel sub= new SubMenuModel();                ArrayList<SubMenu> myList= sub.findChildren(Id);                        for(SubMenu sb:myList)        {            sub.deleteSubMenu(sb.id);                     }     }                public void updateControllerMenuButton(int id , String name) throws SQLException       {           Statement s=con.createStatement();                s.execute("update controller_menu_button set name = '"+name+"' where Id="+id);        }      }                                                                               