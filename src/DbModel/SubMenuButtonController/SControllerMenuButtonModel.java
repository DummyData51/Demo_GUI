/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. */package DbModel.SubMenuButtonController;import DbModel.ControllerMenuButton;import DbModel.MyDbConnection;import DbModel.SubMenu;import DbModel.SubMenuModel;import java.sql.Connection;import java.sql.ResultSet;import java.sql.SQLException;import java.sql.Statement;import java.util.ArrayList;/** * * @author Mughees */public class SControllerMenuButtonModel {         MyDbConnection db;     Connection con;     ArrayList<SControllerMenuButton> ac= new ArrayList<SControllerMenuButton>();                    public SControllerMenuButtonModel()     {          db= new MyDbConnection();         con=db.getMyConnection();     }                    public ArrayList<SControllerMenuButton> allButtons() throws SQLException   {                         Statement s=con.createStatement();        ResultSet res = s.executeQuery("SELECT * FROM scontroller_menu_button");                 while (res.next()) {                          int id=res.getInt("Id");            String name=res.getString("name");           int  userId=res.getInt("main_menu_button_id");                          SControllerMenuButton tmp = new SControllerMenuButton(id,name,userId);        ac.add(tmp);                }                                    return ac;  }     public ArrayList<SControllerMenuButton> findChildren(int id) throws SQLException    {        allButtons();        ArrayList<SControllerMenuButton> children=new ArrayList<SControllerMenuButton>();                for(SControllerMenuButton c :  ac)        {                                  if(c.mainMenuId==id)           {               children.add(c);                          }        }        return children;    }          public SControllerMenuButton findControllerMenuButton(int id) throws SQLException    {        allButtons();        for(SControllerMenuButton c :  ac)        {                                   if(c.id==id)           {               return c;           }        }        return null;    }                      public String insertControllerMenuButton( String name, int mainId) throws SQLException    {                 Statement s=con.createStatement();               s.execute("insert into scontroller_menu_button values( 0,'"+name+"',"+mainId+")");                 ResultSet res = s.executeQuery("SELECT max(Id) FROM scontroller_menu_button");         int id=0;        while (res.next()) {                        id=res.getInt("max(Id)");                   }                                                return String.valueOf(id);              }       public void deleteControllerMenuButton( int Id) throws SQLException     {                 Statement s=con.createStatement();                s.execute("delete from scontroller_menu_button where Id="+Id);                  SSubMenuModel sub= new SSubMenuModel();                ArrayList<SSubMenu> myList= sub.findChildren(Id);                        for(SSubMenu sb:myList)        {            sub.deleteSubMenu(sb.id);                     }     }                public void updateControllerMenuButton(int id , String name) throws SQLException       {           Statement s=con.createStatement();                s.execute("update scontroller_menu_button set name = '"+name+"' where Id="+id);        }      }                                                                               